## 0. 테스트 피라미드

- 테스트는 목적, 범위, 대상에 따라 여러 종류로 분류
- 테스트 피라미드
    - 일반적인 테스트 분류 체계, 3단계 분류 체계
    - `단위 테스트`
        - 가장 작은 단위를 검증하는 테스트
        - Unit = 함수, 메서드, 클래스 같은 개별적이고 작은 코드 조각들을 의미
    - `통합 테스트`
        - 여러 컴포넌트나 객체가 협력하는 상황을 검증하는 테스트
        - 비지니스 프로세스의 흐름을 검사하는 테스트
        - 연동 시스템의 장애나 예외 상황이 발생했을 때 시스템이 어떻게 반응하는지 테스트하는 역할
    - `E2E 테스트`
        - 실제 사용자 시나리오에서 시스템이 어떻게 동작하는지 검증하는 테스트
        - 가장 사용자와 가까운 테스트
        - 종종 API 테스트라고 불림
- 테스트 비율
    - 단위 : 통합 : E2E = 80 : 15 : 5
- 단위 테스트가 가장 중요하다.

## 1. 구글의 테스트 피라미드

- 테스트의 크기에 따라 분류
    - 크기 = 테스트를 실행하는데 사용되는 리소스
- 소형 테스트
    - 단일 서버, 단일 프로세스, 단일 스레드에서 동작하며, 디스크 I/O, 블로킹 호출이 없는 테스트
- 중형 테스트
    - 단일 서버에서 동작하되 멀티 프로세스, 멀티 스레드를 사용할 수 있는 테스트
- 대형 테스트
    - 멀티 서버에서 동작하는 테스트

## 2. 테스트 분류 기준

- `테스트가 결정적인가?`
    - 결정적 = 일관된
    - 비결정적인 예
        - 테스트용으로 H2 데이터베이스를 사용할 경우
            - 테스트가 H2 프로세스, 프로세스간 통신도 영향을 받는다.
- `테스트의 속도가 빠른가?`

- **비 결정적인 테스트가 만들어지는 이유**
    - 테스트가 병렬 처리
    - 테스트가 디스크 I/O를 사용
    - 테스트가 다른 프로세스와 통신
    - 테스트가 외부 서버와 통신
- **속도가 느린 테스트가 만들어지는 경우**
    - 테스트가 블로킹 호출
    - 테스트가 디스크 I/O를 사용
    - 테스트가 다른 프로세스와 통신
    - 테스트가 외부 서버와 통신

## 3. 소형 테스트의 중요성

- 시스템에는 소형 테스트가 많아야 한다.
- 중형 테스트나 대형 테스트가 소형 테스트보다 많아지는 것은 바람직하지 않은 현상
- 소형 테스트는 단일 스레드, 단일 프로세스, 단일 서버에서 실행되며, 디스크 I/O, 블로킹 호출이 없는 테스트
- H2를 이용한 테스트는 중형 테스트