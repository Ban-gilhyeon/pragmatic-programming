## 0. 순환 참조

- 두 개 이상의 객체나 컴포넌트가 서로 참조함으로써 의존 관계에 사이클이 생기는 상황
- 대표적인 안티패턴
- JPA의 양방향 연관관계는 순환 참조이다.

## 1. 순환 참조의 문제점

- 무한 루프
    - `객체 A`가 `객체 B`의 메서드를 호출, `객체 B`가 `객체 A`의 메서드를 호출하는 상황
- 시스템 복잡도
- 메모리 누수

## 2. 순환 참조 해결 방안

- 불필요한 참조 제거
- 간접 참조 허용
    - 엔티티가 아닌 엔티티 식별자(Team team → Long teamId)
- 공통 컴포넌트 분리
- 이벤트 기반 시스템 사용

## 3. 양방향 매핑

- 양방향 매핑은 도메인 설계를 하다가 어쩔수 없이 나오는 순환 참조 문제에 사용하는 것이 바람직하다.

## 4. 상위 수준의 순환 참조

- 순환 참조는 객체뿐만 아니라 패키지 사이나 시스템 수준에서도 발생할 수 있는 문제
- 잘 만들어진 패키지는 그 자체로 분리해서 새로운 서비스를 만들 수 있을 정도로 독립적이다.